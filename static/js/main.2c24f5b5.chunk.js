(this["webpackJsonpapi-blog"]=this["webpackJsonpapi-blog"]||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o);a(89),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(7),i=a(141),s=a(144),u=a(146),m=a(147),d=a(43),f=a(14),p=a(47),b=a.n(p),v=a(64),g=a(51),E=a(65),h=a(66),O=a(48),j=a.n(O),x=new(function(){function e(){Object(E.a)(this,e),this.client=j.a.create(),this.handlers=[]}return Object(h.a)(e,[{key:"init",value:function(e){this.client=j.a.create({baseURL:e})}},{key:"subscribe",value:function(e){this.handlers.push(e)}},{key:"get",value:function(e,t){var a=this;return new Promise((function(n,r){a.client.get(e,{params:t}).then((function(e){return n(e.data)})).catch((function(e){r(e),a.handlers.forEach((function(t){return t(e)}))}))}))}},{key:"put",value:function(e,t,a){var n=this;return new Promise((function(r,o){n.client.put(e,Object(g.a)({},t),{params:a}).then((function(e){return r(e.data)})).catch((function(e){o(e),n.handlers.forEach((function(t){return t(e)}))}))}))}},{key:"post",value:function(e,t,a){var n=this;return new Promise((function(r,o){n.client.post(e,Object(g.a)({},t),{params:a}).then((function(e){return r(e.data)})).catch((function(e){o(e),n.handlers.forEach((function(t){return t(e)}))}))}))}},{key:"delete",value:function(){var e=Object(v.a)(b.a.mark((function e(t,a){var n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.client.delete(t,{params:a}).then((function(t){return e(t.data)})).catch((function(e){r(e),n.handlers.forEach((function(t){return t(e)}))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}()),w=function(){var e=Object(n.useContext)(Pe);return{onLogin:function(e,t){return x.post("/login",{email:e,password:t})},onLogout:function(){e.setAuth(!1),e.setUser(void 0),localStorage.removeItem("user")},onRegister:function(e,t){return x.post("/users",t)}}},N=Object(i.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textDecoration:"none",color:"white",fontSize:"40px"},logoutButton:{marginRight:20},userBox:{display:"flex",alignItems:"center"}}})),y=function(){var e,t=N(),a=Object(n.useContext)(Pe),o=w();return r.a.createElement(s.a,{position:"fixed"},r.a.createElement(u.a,null,r.a.createElement(f.b,{to:"/",className:t.title},"Site"),a.auth&&r.a.createElement("div",{className:t.userBox},r.a.createElement(m.a,{variant:"contained",className:t.logoutButton,onClick:function(){o.onLogout()}},"Logout"),r.a.createElement(d.a,null,null===(e=a.user)||void 0===e?void 0:e.email))))},C=a(6),S=a(148),P=a(149),k=a(150),I=a(151),T=a(70),U=a.n(T),A=a(71),D=a.n(A),R=Object(i.a)((function(){return{card:{padding:20,display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,width:"100%",boxSizing:"border-box"},link:{textDecoration:"none",display:"grid"},text:{overflow:"hidden",textOverflow:"ellipsis"},content:{overflow:"hidden"},buttons:{display:"flex"},button:{alignItems:"flex-start",marginRight:10}}})),L=function(e){var t=R(),a=e.post,o=a.userId,c=Object(n.useState)(),i=Object(l.a)(c,2),s=i[0],u=i[1];Object(n.useEffect)((function(){u(e.users[o-1])}),[e.users]);return r.a.createElement(S.a,{className:t.card,variant:"outlined"},r.a.createElement(f.b,{to:"/posts/".concat(a.id),className:t.link},r.a.createElement(P.a,{title:a.title,subheader:null===s||void 0===s?void 0:s.name}),r.a.createElement(k.a,{className:t.content},r.a.createElement(d.a,{className:t.text},a.body))),r.a.createElement("div",{className:t.buttons},r.a.createElement(I.a,{"aria-label":"delete",onClick:function(){e.onDeletePost&&e.onDeletePost(a.id)},className:t.button},r.a.createElement(U.a,null)),r.a.createElement(I.a,{"aria-label":"delete",onClick:function(){e.onEditPost&&e.onEditPost(a.id)},className:t.button},r.a.createElement(D.a,null))))};function W(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],o=function(){return x.get("/posts").then(r)};return{posts:a,getPosts:o,createPost:function(e){return x.post("/posts",e)},editPost:function(e,t){return x.put("/posts/".concat(e),t)},deletePost:function(e){return x.delete("posts/".concat(e)).then(o)}}}function B(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),c=Object(l.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)([]),m=Object(l.a)(u,2),d=m[0],f=m[1],p=Object(n.useState)([]),b=Object(l.a)(p,2),v=b[0],g=b[1];return{users:a,userPosts:i,userAlbums:d,userToDos:v,getUsers:function(){return x.get("users").then(r)},getUserPosts:function(e){return x.get("users/".concat(e,"/posts")).then(s)},getUserAlbums:function(e){return x.get("users/".concat(e,"/albums")).then(f)},getUserToDos:function(e){return x.get("users/".concat(e,"/todos")).then(g)}}}var G=Object(i.a)((function(){return{container:{position:"relative",marginTop:80,padding:50},posts:{display:"grid",gridRowGap:40}}})),z=function(){var e=G(),t=Object(C.f)(),a=W(),o=a.posts,c=a.getPosts,l=a.deletePost,i=B(),s=i.users,u=i.getUsers;Object(n.useEffect)((function(){c()}),[]),Object(n.useEffect)((function(){u()}),[]);var d=function(e){l(e)},f=function(e){t.push("/editPost/".concat(e))};return r.a.createElement("div",{className:e.container},r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){t.push("/createPost")}},"Create a post"),r.a.createElement("div",{className:e.posts},o.map((function(e){return r.a.createElement(L,{post:e,key:e.id,users:s,onDeletePost:d,onEditPost:f})}))))},q=Object(i.a)((function(){return{card:{padding:20,display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,width:"100%",boxSizing:"border-box",marginTop:15},text:{overflow:"hidden",textOverflow:"ellipsis"},content:{overflow:"hidden"}}})),J=function(e){var t=q(),a=e.comment;return r.a.createElement(S.a,{className:t.card,variant:"outlined"},r.a.createElement(P.a,{title:null===a||void 0===a?void 0:a.name}),r.a.createElement(k.a,{className:t.content},r.a.createElement(d.a,{className:t.text},null===a||void 0===a?void 0:a.body)))},Y=Object(i.a)((function(){return{card:{width:"100%",padding:15,boxSizing:"border-box"}}})),M=function(e){var t=Y(),a=e.users,n=e.comments;return r.a.createElement(S.a,{className:t.card,variant:"outlined"},r.a.createElement(d.a,{variant:"h4"},"Comments:"),r.a.createElement("div",null,n.map((function(e){return r.a.createElement(J,{key:e.id,comment:e,users:a})}))))},F=a(72),$=a.n(F),H=Object(i.a)((function(){return{container:{marginTop:"64px",position:"relative",display:"grid",gridTemplateColumns:"1fr",justifyItems:"center",padding:50,paddingTop:"50px",paddingBottom:"50px",alignItems:"flex-start",gridRowGap:20}}})),K=function(e){var t=H();return r.a.createElement("div",{className:$()(t.container,e.className)},e.children)};function Q(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){e&&x.get("posts/".concat(e)).then(o)}),[e]),{post:r}}function V(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){e&&x.get("users/".concat(e)).then(o)}),[e]),{user:r}}function X(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){e&&x.get("posts/".concat(e,"/comments")).then(o)}),[e]),{postComments:r}}var Z=Object(i.a)((function(){return{card:{width:"100%",padding:15,boxSizing:"border-box"},text:{overflow:"hidden",textOverflow:"ellipsis"},link:{textDecoration:"none",display:"grid"}}})),_=function(){var e=Z(),t=Object(C.g)().postId,a=B(),o=a.users,c=a.getUsers,l=Q(t).post,i=V(null===l||void 0===l?void 0:l.userId).user,s=X(t).postComments;return Object(n.useEffect)((function(){c()}),[]),r.a.createElement(K,null,r.a.createElement(f.b,{to:"/users/".concat(null===i||void 0===i?void 0:i.id),className:e.link},r.a.createElement(S.a,{className:e.card,variant:"outlined"},r.a.createElement(d.a,{variant:"h4",align:"center"},null===i||void 0===i?void 0:i.name))),r.a.createElement(S.a,{className:e.card,variant:"outlined"},r.a.createElement(d.a,{variant:"h4",align:"center"},null===l||void 0===l?void 0:l.title),r.a.createElement(d.a,{variant:"body1",paragraph:!0,className:e.text},null===l||void 0===l?void 0:l.body)),r.a.createElement(M,{comments:s,users:o}))},ee=a(152),te=a(153),ae=a(154),ne=a(155),re=a(156),oe=a(157),ce=Object(i.a)((function(){return{tableContainer:{marginTop:10},postName:{overflow:"hidden"}}})),le=function(e){var t=ce(),a=e.posts,n=void 0===a?[]:a;return r.a.createElement(ee.a,{className:t.tableContainer},r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(ne.a,null,r.a.createElement(re.a,{align:"center"},"Posts"))),r.a.createElement(oe.a,null,null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(ne.a,{key:e.id},r.a.createElement(re.a,{align:"center",className:t.postName},r.a.createElement(f.b,{to:"/posts/".concat(e.id)},e.title)))})))))},ie=Object(i.a)((function(){return{tableContainer:{marginTop:10},postName:{overflow:"hidden"}}})),se=function(e){var t=ie(),a=e.albums;return r.a.createElement(ee.a,{className:t.tableContainer},r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(ne.a,null,r.a.createElement(re.a,{align:"center"},"Albums"))),r.a.createElement(oe.a,null,null===a||void 0===a?void 0:a.map((function(e){return r.a.createElement(ne.a,{key:e.id},r.a.createElement(re.a,{align:"center",className:t.postName},r.a.createElement(f.b,{to:"/albums/".concat(e.id)},e.title)))})))))},ue=a(158),me=a(159),de=Object(i.a)((function(){return{tableContainer:{marginTop:10},postName:{overflow:"hidden"}}})),fe=function(e){var t=de(),a=e.toDos,n=void 0===a?[]:a;return r.a.createElement(ee.a,{className:t.tableContainer},r.a.createElement(te.a,null,r.a.createElement(ae.a,null,r.a.createElement(ne.a,null,r.a.createElement(re.a,{align:"center"},"To Do's"),r.a.createElement(re.a,{align:"center"},"Complete?"))),r.a.createElement(oe.a,null,null===n||void 0===n?void 0:n.map((function(e){return r.a.createElement(ne.a,{key:e.id},r.a.createElement(re.a,{align:"center",className:t.postName},r.a.createElement(d.a,null,e.title)),r.a.createElement(re.a,{align:"center"},!0===e.completed?r.a.createElement(ue.a,null):r.a.createElement(me.a,null)))})))))},pe=Object(i.a)((function(){return{card:{padding:20,display:"grid",gridTemplateColumns:"1fr",gridRowGap:20,width:"100%",boxSizing:"border-box",marginTop:15},text:{overflow:"hidden",textOverflow:"ellipsis"},content:{overflow:"hidden"}}})),be=function(){var e=pe(),t=Object(C.g)().userId,a=V(t).user,o=B(),c=o.userPosts,l=o.getUserPosts,i=o.userAlbums,s=o.getUserAlbums,u=o.userToDos,m=o.getUserToDos;return Object(n.useEffect)((function(){l(t),s(t),m(t)}),[a]),r.a.createElement(K,null,r.a.createElement(S.a,{className:e.card,variant:"outlined"},r.a.createElement(P.a,{title:null===a||void 0===a?void 0:a.username}),r.a.createElement(P.a,{title:"User information:"}),r.a.createElement(k.a,{className:e.content},r.a.createElement(d.a,{className:e.text},"Name:",null===a||void 0===a?void 0:a.name),r.a.createElement(d.a,{className:e.text},"City: ",null===a||void 0===a?void 0:a.address.city),r.a.createElement(d.a,{className:e.text},"Address: ",null===a||void 0===a?void 0:a.address.street," ",null===a||void 0===a?void 0:a.address.suite),r.a.createElement(d.a,{className:e.text},"Company: ",null===a||void 0===a?void 0:a.company.name),r.a.createElement(d.a,{className:e.text},"Email: ",null===a||void 0===a?void 0:a.email),r.a.createElement(d.a,{className:e.text},"Phone number: ",null===a||void 0===a?void 0:a.phone),r.a.createElement(d.a,{className:e.text},"Website: ",null===a||void 0===a?void 0:a.website))),r.a.createElement(le,{posts:c}),r.a.createElement(se,{albums:i}),r.a.createElement(fe,{toDos:u}))};function ve(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(),c=Object(l.a)(o,2),i=c[0],s=c[1];return{photos:a,photo:i,getPhotos:function(e){return x.get("albums/".concat(e,"/photos")).then(r)},getPhoto:function(e){return x.get("photos/".concat(e)).then(s)}}}var ge=Object(i.a)((function(){return{container:{gridTemplateColumns:"1fr 1fr 1fr 1fr"},photoContainer:{width:"50%",textAlign:"center"}}})),Ee=function(){var e=Object(C.g)().albumId,t=ge(),a=ve(),o=a.photos,c=a.getPhotos;return Object(n.useEffect)((function(){c(e)}),[]),r.a.createElement(K,{className:t.container},null===o||void 0===o?void 0:o.map((function(e){return r.a.createElement(f.b,{to:"/albums/".concat(e.albumId,"/").concat(e.id),key:e.id,className:t.photoContainer},r.a.createElement("img",{src:e.thumbnailUrl}),r.a.createElement(d.a,null,e.title))})))},he=function(){var e=Object(C.g)().photoId,t=ve(),a=t.photo,o=t.getPhoto;return Object(n.useEffect)((function(){o(e)}),[]),r.a.createElement(K,null,r.a.createElement("img",{src:null===a||void 0===a?void 0:a.url}))},Oe=a(160),je=a(161),xe=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(l.a)(c,2),s=i[0],u=i[1],f=Object(n.useState)(!1),p=Object(l.a)(f,2),b=p[0],v=p[1],g=Object(n.useState)(void 0),E=Object(l.a)(g,2),h=E[0],O=E[1],j=W();return r.a.createElement(K,null,r.a.createElement(d.a,{variant:"h3",component:"h1"},"Write your own post!"),r.a.createElement(Oe.a,{required:!0,label:"Article title",variant:"outlined",fullWidth:!0,autoFocus:!0,value:a,onChange:function(e){return o(e.target.value)},inputProps:{maxLength:40}}),r.a.createElement(Oe.a,{required:!0,label:"Article body",multiline:!0,rows:14,variant:"outlined",fullWidth:!0,value:s,onChange:function(e){return u(e.target.value)}}),r.a.createElement(m.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){var e,t,n=(t=11,(e=1)+Math.floor((t-e)*Math.random())),r={title:a,body:s,userId:n};a.length>0&&a.length>0?j.createPost(r).then((function(){o(""),u(""),v(!0)})):O("You have to write tittle and text!")}},"Upload"),b&&r.a.createElement(je.a,{severity:"success"},"Your post has been added!"),h&&r.a.createElement(je.a,{severity:"error"},h))},we=function(){var e,t,a=Object(n.useState)(null===(e=Q().post)||void 0===e?void 0:e.title),o=Object(l.a)(a,2),c=o[0],i=o[1],s=Object(n.useState)(null===(t=Q().post)||void 0===t?void 0:t.body),u=Object(l.a)(s,2),f=u[0],p=u[1],b=Object(n.useState)(!1),v=Object(l.a)(b,2),g=v[0],E=v[1],h=Object(n.useState)(void 0),O=Object(l.a)(h,2),j=O[0],x=O[1],w=Object(C.g)().postId,N=W();return r.a.createElement(K,null,r.a.createElement(d.a,{variant:"h3",component:"h1"},"Edit the post"),r.a.createElement(Oe.a,{required:!0,label:"Article title",variant:"outlined",fullWidth:!0,autoFocus:!0,value:c,onChange:function(e){return i(e.target.value)},inputProps:{maxLength:40}}),r.a.createElement(Oe.a,{required:!0,label:"Article body",multiline:!0,rows:14,variant:"outlined",fullWidth:!0,value:f,onChange:function(e){return p(e.target.value)}}),r.a.createElement(m.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){if(c&&f){var e={title:c,body:f};c.length>0&&f.length>0?N.editPost("/posts/".concat(w),e).then((function(){i(""),p(""),E(!0)})):x("You have to write tittle and text!")}}},"Edit"),g&&r.a.createElement(je.a,{severity:"success"},"Your post has been edited!"),j&&r.a.createElement(je.a,{severity:"error"},j))},Ne=Object(i.a)((function(){return{container:{height:"100vh",position:"relative"},card:{padding:20,position:"absolute",top:"50%",left:"50%",width:600,transform:"translate(-50%, -50%)",display:"grid",gridTemplateColumns:"1fr",gridRowGap:20},success:{color:"green"},error:{color:"red"},login:{textDecoration:"none"},root:{marginLeft:"auto"}}})),ye=function(){var e=Ne(),t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),u=s[0],p=s[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),g=v[0],E=v[1],h=Object(n.useState)(""),O=Object(l.a)(h,2),j=O[0],w=O[1],N=Object(n.useState)(""),y=Object(l.a)(N,2),C=y[0],P=y[1],k=Object(n.useState)(!1),I=Object(l.a)(k,2),T=I[0],U=I[1],A=Object(n.useState)(void 0),D=Object(l.a)(A,2),R=D[0],L=D[1];return r.a.createElement("div",{className:e.container},r.a.createElement(S.a,{className:e.card,variant:"outlined"},r.a.createElement(Oe.a,{label:"Name",value:o,onChange:function(e){return c(e.target.value)}}),r.a.createElement(Oe.a,{label:"Email",value:g,onChange:function(e){return E(e.target.value)}}),r.a.createElement(Oe.a,{type:"password",label:"Password",value:j,onChange:function(e){return w(e.target.value)}}),r.a.createElement(Oe.a,{type:"password",label:"Confirm password",value:C,onChange:function(e){return P(e.target.value)}}),r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){j===C?x.post("/users",{name:o,username:u,email:g,password:j}).then((function(){E(""),c(""),w(""),P(""),p(""),U(!0)})):L("Passwords aren't equal!")}},"Register"),r.a.createElement(d.a,{className:e.root},r.a.createElement(f.b,{className:e.login,to:"/login"},"Login")),T&&r.a.createElement("p",{className:e.success},"Success!"),R&&r.a.createElement("p",{className:e.error},R)))},Ce=Object(i.a)((function(){return{container:{height:"100vh",position:"relative"},card:{padding:20,position:"absolute",top:"50%",left:"50%",width:600,transform:"translate(-50%, -50%)",display:"grid",gridTemplateColumns:"1fr",gridRowGap:20},register:{textDecoration:"none"},root:{marginLeft:"auto"},error:{color:"red"}}})),Se=function(){var e=Ce(),t=Object(n.useState)(""),a=Object(l.a)(t,2),o=a[0],c=a[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),u=s[0],p=s[1],b=Object(n.useState)(void 0),v=Object(l.a)(b,2),g=v[0],E=v[1],h=(Object(C.f)(),Object(n.useContext)(Pe)),O=w();return r.a.createElement("div",{className:e.container},r.a.createElement(S.a,{className:e.card,variant:"outlined"},r.a.createElement(Oe.a,{id:"standard-basic",label:"Email",value:o,onChange:function(e){return c(e.target.value)}}),r.a.createElement(Oe.a,{id:"standard-basic",label:"Password",type:"password",value:u,onChange:function(e){return p(e.target.value)}}),r.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){O.onLogin(o,u).then((function(e){c(""),p(""),h.setAuth(!0),h.setUser(e.data.user),localStorage.setItem("user",JSON.stringify(e.data.user))})).catch((function(e){var t=e.response;t&&E(t.data.message)}))}},"Login"),r.a.createElement(d.a,{className:e.root},r.a.createElement(f.b,{className:e.register,to:"/create"},"Register")),g&&r.a.createElement("p",{className:e.error},g)))};x.init("http://localhost:3002");var Pe=Object(n.createContext)({auth:!1,setAuth:function(e){},setUser:function(e){}}),ke=function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(void 0),i=Object(l.a)(c,2),s=i[0],u=i[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("user");e&&(o(!0),u(JSON.parse(e)))}),[]),r.a.createElement(Pe.Provider,{value:{auth:a,user:s,setAuth:o,setUser:u}},r.a.createElement(y,null),r.a.createElement(C.c,null,r.a.createElement(C.a,{exact:!0,path:"/",component:z}),r.a.createElement(C.a,{exact:!0,path:"/posts/:postId",component:_}),r.a.createElement(C.a,{exact:!0,path:"/users/:userId",component:be}),r.a.createElement(C.a,{exact:!0,path:"/albums/:albumId",component:Ee}),r.a.createElement(C.a,{exact:!0,path:"/albums/:albumId/:photoId",component:he}),r.a.createElement(C.a,{exact:!0,path:"/createPost",component:xe}),r.a.createElement(C.a,{exact:!0,path:"/editPost/:postId",component:we}),r.a.createElement(C.a,{exact:!0,path:"/create",component:ye}),r.a.createElement(C.a,{exact:!0,path:"/login",component:Se})))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f.a,null,r.a.createElement(ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,t,a){e.exports=a(114)},89:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.2c24f5b5.chunk.js.map